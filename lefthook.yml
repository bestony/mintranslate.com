pre-commit:
  parallel: true
  jobs:
    - name: biome (staged)
      glob:
        - "src/**/*.{ts,tsx,js,jsx,json,css,html}"
        - ".vscode/**/*.{json}"
        - "index.html"
      exclude:
        - "src/routeTree.gen.ts"
        - "src/styles.css"
        - "src/components/ui/**"
      run: bun run check -- --write {staged_files}
      stage_fixed: true
    - name: typecheck
      glob:
        - "src/**/*.{ts,tsx,js,jsx,json,css,html}"
      run: bun x tsc -p tsconfig.json --noEmit
    - name: test
      run: bun run test
    - name: depcheck
      glob:
        - "src/**/*.{ts,tsx,js,jsx,json,css,html}"
      run: bunx depcheck --ignores="fumadocs-mdx:collections,@types/mdx,@vitest/coverage-v8,depcheck,tailwindcss,tw-animate-css,@tanstack/router-plugin"

pre-push:
  parallel: true
  jobs:
    - name: biome
      run: bun run check

    - name: typecheck
      glob:
        - "src/**/*.{ts,tsx,js,jsx,json,css,html}"
        - ".vscode/**/*.{json}"
        - "index.html"
      run: bun x tsc -p tsconfig.json --noEmit

    - name: test
      glob:
        - "src/**/*.{ts,tsx,js,jsx,json,css,html}"
        - ".vscode/**/*.{json}"
        - "index.html"
      run: bun run test
